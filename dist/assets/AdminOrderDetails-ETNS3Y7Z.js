import{aD as fe,r as Y,j as e,W as be,aE as ye,i as me,h as je,x as ve,m as M,a7 as de,b as pe,aj as ue,aF as Ne,aG as we,a2 as xe,aH as Pe,aI as Ae,aJ as Se,u as Ee,ac as Te,ak as Ce}from"./index-BJZVsLRM.js";import{u as ke}from"./uploadMedia-BSrAngoH.js";import{F as le,T as oe}from"./Constant-B8kb6R2V.js";import{R as De}from"./ReceiptPreview-BdM_1W-t.js";var re={exports:{}},Fe=re.exports,he;function Re(){return he||(he=1,function(s,t){(function(h,o){s.exports=o(fe())})(typeof self<"u"?self:Fe,function(h){return function(){var o={155:function(a){a.exports=h}},y={};function d(a){var n=y[a];if(n!==void 0)return n.exports;var l=y[a]={exports:{}};return o[a](l,l.exports,d),l.exports}d.d=function(a,n){for(var l in n)d.o(n,l)&&!d.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:n[l]})},d.o=function(a,n){return Object.prototype.hasOwnProperty.call(a,n)},d.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})};var j={};d.r(j),d.d(j,{useReactToPrint:function(){return W}});var P=d(155);function m({level:a="error",messages:n,suppressErrors:l=!1}){l||(a==="error"?console.error(n):a==="warning"?console.warn(n):console.debug(n))}function N(a,n){if(n||!a){const l=document.getElementById("printWindow");l&&document.body.removeChild(l)}}function g(a){return a instanceof Error?a:new Error("Unknown Error")}function S(a,n){const{documentTitle:l,onAfterPrint:v,onPrintError:D,preserveAfterPrint:k,print:I,suppressErrors:F}=n;setTimeout(()=>{var T,C;if(a.contentWindow){let V=function(){v==null||v(),N(k)};if(a.contentWindow.focus(),I)I(a).then(V).catch(R=>{D?D("print",g(R)):m({messages:["An error was thrown by the specified `print` function"],suppressErrors:F})});else{if(a.contentWindow.print){const R=(C=(T=a.contentDocument)===null||T===void 0?void 0:T.title)!==null&&C!==void 0?C:"",U=a.ownerDocument.title;l&&(a.ownerDocument.title=l,a.contentDocument&&(a.contentDocument.title=l)),a.contentWindow.print(),l&&(a.ownerDocument.title=U,a.contentDocument&&(a.contentDocument.title=R))}else m({messages:["Printing for this browser is not currently possible: the browser does not have a `print` method available for iframes."],suppressErrors:F});[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some(R=>{var U,$;return(($=(U=navigator.userAgent)!==null&&U!==void 0?U:navigator.vendor)!==null&&$!==void 0?$:"opera"in window&&window.opera).match(R)})?setTimeout(V,500):V()}}else m({messages:["Printing failed because the `contentWindow` of the print iframe did not load. This is possibly an error with `react-to-print`. Please file an issue: https://github.com/MatthewHerbst/react-to-print/issues/"],suppressErrors:F})},500)}function i(a){const n=[],l=document.createTreeWalker(a,NodeFilter.SHOW_ELEMENT,null);let v=l.nextNode();for(;v;)n.push(v),v=l.nextNode();return n}function p(a,n,l){const v=i(a),D=i(n);if(v.length===D.length)for(let k=0;k<v.length;k++){const I=v[k],F=D[k],T=I.shadowRoot;if(T!==null){const C=F.attachShadow({mode:T.mode});C.innerHTML=T.innerHTML,p(T,C,l)}}else m({messages:["When cloning shadow root content, source and target elements have different size. `onBeforePrint` likely resolved too early.",a,n],suppressErrors:l})}const u=`
    @page {
        /* Remove browser default header (title) and footer (url) */
        margin: 0;
    }
    @media print {
        body {
            /* Tell browsers to print background colors */
            color-adjust: exact; /* Firefox. This is an older version of "print-color-adjust" */
            print-color-adjust: exact; /* Firefox/Safari */
            -webkit-print-color-adjust: exact; /* Chrome/Safari/Edge/Opera */
        }
    }
`;function E(a,n,l,v){var D,k,I,F,T;const{contentNode:C,clonedContentNode:V,clonedImgNodes:R,clonedVideoNodes:U,numResourcesToLoad:$,originalCanvasNodes:te}=l,{bodyClass:se,fonts:_,ignoreGlobalStyles:ne,pageStyle:Z,nonce:q,suppressErrors:f,copyShadowRoots:X}=v;a.onload=null;const b=(D=a.contentDocument)!==null&&D!==void 0?D:(k=a.contentWindow)===null||k===void 0?void 0:k.document;if(b){const H=b.body.appendChild(V);X&&p(C,H,!!f),_&&(!((I=a.contentDocument)===null||I===void 0)&&I.fonts&&(!((F=a.contentWindow)===null||F===void 0)&&F.FontFace)?_.forEach(c=>{const r=new FontFace(c.family,c.source,{weight:c.weight,style:c.style});a.contentDocument.fonts.add(r),r.loaded.then(()=>{n(r)}).catch(A=>{n(r,["Failed loading the font:",r,"Load error:",g(A)])})}):(_.forEach(c=>{n(c)}),m({messages:['"react-to-print" is not able to load custom fonts because the browser does not support the FontFace API but will continue attempting to print the page'],suppressErrors:f})));const K=Z??u,Q=b.createElement("style");q&&(Q.setAttribute("nonce",q),b.head.setAttribute("nonce",q)),Q.appendChild(b.createTextNode(K)),b.head.appendChild(Q),se&&b.body.classList.add(...se.split(" "));const z=b.querySelectorAll("canvas");for(let c=0;c<te.length;++c){const r=te[c],A=z[c];if(A===void 0){m({messages:["A canvas element could not be copied for printing, has it loaded? `onBeforePrint` likely resolved too early.",r],suppressErrors:f});continue}const x=A.getContext("2d");x&&x.drawImage(r,0,0)}for(let c=0;c<R.length;c++){const r=R[c],A=r.getAttribute("src");if(A){const x=new Image;x.onload=()=>{n(r)},x.onerror=(w,O,J,L,G)=>{n(r,["Error loading <img>",r,"Error",G])},x.src=A}else n(r,['Found an <img> tag with an empty "src" attribute. This prevents pre-loading it.',r])}for(let c=0;c<U.length;c++){const r=U[c];r.preload="auto";const A=r.getAttribute("poster");if(A){const x=new Image;x.onload=()=>{n(r)},x.onerror=(w,O,J,L,G)=>{n(r,["Error loading video poster",A,"for video",r,"Error:",G])},x.src=A}else r.readyState>=2?n(r):r.src?(r.onloadeddata=()=>{n(r)},r.onerror=(x,w,O,J,L)=>{n(r,["Error loading video",r,"Error",L])},r.onstalled=()=>{n(r,["Loading video stalled, skipping",r])}):n(r,["Error loading video, `src` is empty",r])}const B="select",ae=C.querySelectorAll(B),ie=b.querySelectorAll(B);for(let c=0;c<ae.length;c++)ie[c].value=ae[c].value;if(!ne){const c=document.querySelectorAll("style, link[rel~='stylesheet'], link[as='style']");for(let r=0,A=c.length;r<A;++r){const x=c[r];if(x.tagName.toLowerCase()==="style"){const w=b.createElement(x.tagName),O=x.sheet;if(O){let J="";try{const L=O.cssRules.length;for(let G=0;G<L;++G)typeof O.cssRules[G].cssText=="string"&&(J+=`${O.cssRules[G].cssText}\r
`)}catch(L){m({messages:["A stylesheet could not be accessed. This is likely due to the stylesheet having cross-origin imports, and many browsers block script access to cross-origin stylesheets. See https://github.com/MatthewHerbst/react-to-print/issues/429 for details. You may be able to load the sheet by both marking the stylesheet with the cross `crossorigin` attribute, and setting the `Access-Control-Allow-Origin` header on the server serving the stylesheet. Alternatively, host the stylesheet on your domain to avoid this issue entirely.",x,`Original error: ${g(L).message}`],level:"warning"})}w.setAttribute("id",`react-to-print-${r}`),q&&w.setAttribute("nonce",q),w.appendChild(b.createTextNode(J)),b.head.appendChild(w)}}else if(x.getAttribute("href"))if(x.hasAttribute("disabled"))m({messages:["`react-to-print` encountered a <link> tag with a `disabled` attribute and will ignore it. Note that the `disabled` attribute is deprecated, and some browsers ignore it. You should stop using it. https://developer.mozilla.org/en-US/docs/Web/HTML/Element/link#attr-disabled. The <link> is:",x],level:"warning"}),n(x);else{const w=b.createElement(x.tagName);for(let O=0,J=x.attributes.length;O<J;++O){const L=x.attributes[O];L&&w.setAttribute(L.nodeName,(T=L.nodeValue)!==null&&T!==void 0?T:"")}w.onload=()=>{n(w)},w.onerror=(O,J,L,G,ge)=>{n(w,["Failed to load",w,"Error:",ge])},q&&w.setAttribute("nonce",q),b.head.appendChild(w)}else m({messages:["`react-to-print` encountered a <link> tag with an empty `href` attribute. In addition to being invalid HTML, this can cause problems in many browsers, and so the <link> was not loaded. The <link> is:",x],level:"warning"}),n(x)}}}$===0&&S(a,v)}function W({bodyClass:a,contentRef:n,copyShadowRoots:l,documentTitle:v,fonts:D,ignoreGlobalStyles:k,nonce:I,onAfterPrint:F,onBeforePrint:T,onPrintError:C,pageStyle:V,preserveAfterPrint:R,print:U,suppressErrors:$}){return(0,P.useCallback)(te=>{function se(){const _={bodyClass:a,contentRef:n,copyShadowRoots:l,documentTitle:v,fonts:D,ignoreGlobalStyles:k,nonce:I,onAfterPrint:F,onPrintError:C,pageStyle:V,preserveAfterPrint:R,print:U,suppressErrors:$},ne=function(){const f=document.createElement("iframe");return f.width=`${document.documentElement.clientWidth}px`,f.height=`${document.documentElement.clientHeight}px`,f.style.position="absolute",f.style.top=`-${document.documentElement.clientHeight+100}px`,f.style.left=`-${document.documentElement.clientWidth+100}px`,f.id="printWindow",f.srcdoc="<!DOCTYPE html>",f}(),Z=function(f,X){const{contentRef:b,fonts:H,ignoreGlobalStyles:K,suppressErrors:Q}=X,z=function({contentRef:A,optionalContent:x,suppressErrors:w}){return x&&typeof x=="function"?(A&&m({level:"warning",messages:['"react-to-print" received a `contentRef` option and an optional-content param passed to its callback. The `contentRef` option will be ignored.']}),x()):A?A.current:void m({messages:['"react-to-print" did not receive a `contentRef` option or a optional-content param pass to its callback.'],suppressErrors:w})}({contentRef:b,optionalContent:f,suppressErrors:Q});if(!z)return;const B=z.cloneNode(!0),ae=document.querySelectorAll("link[rel~='stylesheet'], link[as='style']"),ie=B.querySelectorAll("img"),c=B.querySelectorAll("video"),r=H?H.length:0;return{contentNode:z,clonedContentNode:B,clonedImgNodes:ie,clonedVideoNodes:c,numResourcesToLoad:(K?0:ae.length)+ie.length+c.length+r,originalCanvasNodes:z.querySelectorAll("canvas")}}(te,_);if(!Z)return void m({messages:["There is nothing to print"],suppressErrors:$});const q=function(f,X,b){const{suppressErrors:H}=f,K=[],Q=[];return function(z,B){K.includes(z)?m({level:"debug",messages:["Tried to mark a resource that has already been handled",z],suppressErrors:H}):(B?(m({messages:['"react-to-print" was unable to load a resource but will continue attempting to print the page',...B],suppressErrors:H}),Q.push(z)):K.push(z),K.length+Q.length===X&&S(b,f))}}(_,Z.numResourcesToLoad,ne);(function(f,X,b,H){f.onload=()=>{E(f,X,b,H)},document.body.appendChild(f)})(ne,q,Z,_)}N(R,!0),T?T().then(()=>{se()}).catch(_=>{C==null||C("onBeforePrint",g(_))}):se()},[a,n,l,v,D,k,I,F,T,C,V,R,U,$])}return j}()})}(re)),re.exports}Re();const Oe=({isOpen:s,onClose:t,orderId:h})=>{const[o,y]=Y.useState(null),[d,j]=Y.useState(null),[P,m]=Y.useState(!1),N=Y.useRef(null);if(!s)return null;const g=p=>{const u=p.target.files[0];if(u)if(y(u),u.type.startsWith("image/")){const E=URL.createObjectURL(u);j(E)}else j(null)},S=p=>{p.preventDefault();const u=p.dataTransfer.files[0];if(u)if(y(u),u.type.startsWith("image/")){const E=URL.createObjectURL(u);j(E)}else j(null)},i=async()=>{if(o){m(!0);try{const u=(await ke([o]))[0];await me.post("/admin/orders/updateDelhiveryReceipt",{delhiveryReceipt:u,orderId:h})&&(y(null),j(null),t())}catch(p){console.log(p),je(error)}finally{m(!1)}}};return e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center glass h-full bg-opacity-50 backdrop-blur-sm transition-all",onClick:t,children:e.jsxs("div",{className:"relative bg-white w-[90%] sm:w-[500px] max-w-[95%] rounded-lg shadow-xl p-6",onClick:p=>p.stopPropagation(),children:[e.jsx("button",{onClick:t,className:"absolute top-4 right-4 text-gray-400 hover:text-red-500",children:e.jsx(be,{size:20})}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Upload Delhivery Receipt"}),e.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center cursor-pointer hover:border-blue-400 transition-colors",onClick:()=>N.current.click(),onDrop:S,onDragOver:p=>p.preventDefault(),children:[e.jsx(ye,{className:"mx-auto text-4xl text-blue-500 mb-2"}),e.jsxs("p",{className:"text-gray-600 text-sm",children:["Drag & drop a file here or"," ",e.jsx("span",{className:"text-blue-600 underline",children:"click to browse"})]}),o&&d&&e.jsxs("div",{className:"mt-4",children:[e.jsx("img",{src:d,alt:"Preview",className:"mx-auto max-h-48 rounded shadow"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.name})]}),o&&!d&&e.jsxs("p",{className:"mt-3 text-sm text-green-600 font-medium",children:["Selected: ",o.name]}),e.jsx("input",{type:"file",accept:"application/pdf,image/*",ref:N,onChange:g,className:"hidden"})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:t,className:"px-4 py-2 text-sm text-gray-700 border border-gray-300 rounded hover:bg-gray-100",disabled:P,children:"Cancel"}),e.jsx("button",{onClick:i,disabled:!o||P,className:`px-4 py-2 text-sm text-white rounded ${o&&!P?"bg-gray-900 hover:bg-blue-700":"bg-gray-400 cursor-not-allowed"}`,children:P?"Uploading...":"Upload"})]})]})})},Le=({receipt:s,printRef:t})=>{var d,j,P,m,N,g,S;const h=i=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:2}).format(i),o=i=>{const p=(i==null?void 0:i.price)||0,u=(i!=null&&i.withFallPico?le:0)+(i!=null&&i.withTassels?oe:0),E=p+u;return{finalPricePerUnit:E,total:E*(i==null?void 0:i.quantity)}},y=(d=s==null?void 0:s.items)==null?void 0:d.reduce((i,p)=>{const{total:u}=o(p);return i+u},0);return e.jsx("div",{className:"p-4 hidden",children:e.jsxs("div",{ref:t,className:"mt-6 p-6 bg-white shadow-lg rounded text-sm font-sans",children:[e.jsxs("div",{className:"border-b pb-4 mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold mb-1",children:"Order Receipt"}),e.jsxs("p",{className:"text-gray-600",children:["Order ID: ",s==null?void 0:s.id]}),e.jsxs("p",{className:"text-gray-600",children:["Date: ",new Date(s==null?void 0:s.date).toLocaleString()]})]}),e.jsxs("div",{className:"mb-6 capitalize",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Customer Info"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Name:"})," ",s==null?void 0:s.customerName]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Email:"})," ",s==null?void 0:s.email]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Phone:"})," ",s==null?void 0:s.phone]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Address:"})," ",s!=null&&s.shippingAddress?`${(j=s==null?void 0:s.shippingAddress)==null?void 0:j.street}, ${(P=s==null?void 0:s.shippingAddress)==null?void 0:P.city}, ${(m=s==null?void 0:s.shippingAddress)==null?void 0:m.postalCode},${(N=s==null?void 0:s.shippingAddress)==null?void 0:N.state}, ${(g=s==null?void 0:s.shippingAddress)==null?void 0:g.country}`:"N/A"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Order Items"}),e.jsxs("table",{className:"min-w-full table-auto border border-gray-300 text-xs sm:text-sm",children:[e.jsx("thead",{className:"bg-gray-100",children:e.jsxs("tr",{children:[e.jsx("th",{className:"border p-2 text-left",children:"Product"}),e.jsx("th",{className:"border p-2",children:"Qty"}),e.jsx("th",{className:"border p-2",children:"With Fall Pico"}),e.jsx("th",{className:"border p-2",children:"With Tassels"}),e.jsx("th",{className:"border p-2",children:"Unit Price"}),e.jsx("th",{className:"border p-2",children:"Total"})]})}),e.jsx("tbody",{children:(S=s==null?void 0:s.items)==null?void 0:S.map((i,p)=>{var W;const{finalPricePerUnit:u,total:E}=o(i);return e.jsxs("tr",{className:"text-center",children:[e.jsx("td",{className:"border p-2 text-left",children:((W=i==null?void 0:i.product)==null?void 0:W.name)||"Product"}),e.jsx("td",{className:"border p-2",children:i==null?void 0:i.quantity}),e.jsx("td",{className:"border p-2",children:i!=null&&i.withFallPico?`Yes +₹${le}`:"No"}),e.jsx("td",{className:"border p-2",children:i!=null&&i.withTassels?`Yes +₹${oe}`:"No"}),e.jsx("td",{className:"border p-2",children:h(u)}),e.jsx("td",{className:"border p-2",children:h(E)})]},p)})})]})]}),e.jsxs("div",{className:"text-right mb-6",children:[e.jsxs("p",{children:[e.jsx("strong",{children:"Amount (Inclusive of 5% GST):"})," ",h(y)]}),e.jsx("p",{className:"text-gray-600 italic",children:"GST (5%) is already included in the above amount."}),e.jsxs("p",{children:[e.jsx("strong",{children:"Shipping:"})," ",(s==null?void 0:s.shipping)||"Free"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Payment Method:"})," ",(s==null?void 0:s.paymentMethod)||"N/A"]})]}),e.jsxs("div",{className:"border-t pt-4 text-center text-sm",children:[e.jsx("p",{className:"font-semibold text-base",children:"Thank you for shopping with us!"}),e.jsx("p",{className:"text-gray-700",children:"Srijan Fabs Pvt. Ltd."}),e.jsx("p",{className:"text-gray-700",children:"Contact: +91 89605 00991"})]})]})})},ee={hidden:{opacity:0,y:20},visible:s=>({opacity:1,y:0,transition:{delay:s*.2,duration:.4}})},ce=({status:s,type:t="default"})=>{const h=(o,y)=>{const d=o==null?void 0:o.toLowerCase();if(y==="payment")switch(d){case"paid":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"failed":case"pending":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}switch(d){case"delivered":return"bg-emerald-50 text-emerald-700 border-emerald-200";case"shipped":case"out for delivery":return"bg-blue-50 text-blue-700 border-blue-200";case"pending":return"bg-amber-50 text-amber-700 border-amber-200";case"canceled":return"bg-red-50 text-red-700 border-red-200";default:return"bg-gray-50 text-gray-700 border-gray-200"}};return e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${h(s,t)}`,children:s})},Ie=({order:s,onPrint:t})=>{const[h,o]=Y.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsxs(M.div,{custom:0,initial:"hidden",animate:"visible",variants:ee,className:"flex flex-col sm:flex-row sm:justify-between sm:items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800 mb-2",children:"Admin Order Management"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Order ID:"," ",e.jsx("span",{className:"font-mono font-medium",children:(s==null?void 0:s.razorpay_order_id)||"N/A"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:items-center",children:[e.jsxs("button",{onClick:t,className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-800 hover:text-blue-600 transition-colors border rounded-sm bg-gray-100",children:[e.jsx(Ne,{size:18}),"Print Receipt"]}),e.jsxs("button",{onClick:()=>o(!0),className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-800 hover:text-blue-600 transition-colors border rounded-sm bg-gray-100",children:[e.jsx(we,{size:18}),"Upload Delhivery Receipt"]}),e.jsxs(pe,{to:"/admin/orders",className:"inline-flex items-center gap-2 px-4 py-2 text-sm font-medium text-gray-800 hover:text-blue-600 transition-colors",children:[e.jsx(ue,{size:16}),"Back to Orders"]})]})]}),e.jsx(Oe,{isOpen:h,onClose:()=>o(!1),orderId:s==null?void 0:s._id})]})},Ue=({user:s})=>e.jsxs(M.div,{custom:1,initial:"hidden",animate:"visible",variants:ee,className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(xe,{size:20}),"Customer Information"]}),e.jsx("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 border border-purple-100 rounded-xl p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-100 rounded-full flex items-center justify-center",children:e.jsx(xe,{size:20,className:"text-purple-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customer Name"}),e.jsxs("p",{className:"font-semibold text-gray-800 capitalize",children:[s.firstName," ",s.lastName]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsx(Pe,{size:20,className:"text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Email Address"}),e.jsx("p",{className:"font-medium text-gray-800 lowercase",children:s.email})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:e.jsx(Ae,{size:20,className:"text-green-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Phone Number"}),e.jsx("p",{className:"font-semibold text-gray-800",children:s.phone})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-full flex items-center justify-center",children:e.jsx(Se,{size:20,className:"text-orange-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Customer ID"}),e.jsx("p",{className:"font-mono text-sm text-gray-800",children:s._id})]})]})]})]})})]}),ze=({order:s,formatINR:t})=>e.jsx(M.div,{custom:2,initial:"hidden",animate:"visible",variants:ee,className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Order Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(s.createdAt).toLocaleDateString("en-IN",{day:"numeric",month:"short",year:"numeric"})}),e.jsx("p",{className:"text-xs text-gray-500",children:new Date(s.createdAt).toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Total Amount"}),e.jsxs("p",{className:"text-xl font-bold text-gray-800",children:["₹",t(s.totalAmount)]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Payment Status"}),e.jsx(ce,{status:s.paymentStatus,type:"payment"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide",children:"Delivery Status"}),e.jsx(ce,{status:s.deliveryStatus})]})]})}),Me=({item:s,index:t,formatINR:h,order:o})=>{const y=Ee(),d=s.product.price,j=s.withFallPico?le:0,P=s.withTassels?oe:0,m=j+P,N=(o==null?void 0:o.offer)||0,g=(o==null?void 0:o.discount)||0,S=d*N/100,i=d-S,p=i+m,u=p*s.quantity,E=u-g,W=g?(g/u*100).toFixed(2):0;return e.jsx(M.div,{whileHover:{scale:1.01},transition:{duration:.2},className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm hover:shadow-md",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-6",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("img",{onClick:()=>{var a;return y(`/product/${(a=s.product)==null?void 0:a._id}`)},src:s.product.images[0]||"/Product_Placeholder.webp",alt:s.product.name,className:"w-24 h-24 sm:w-28 sm:h-28 object-cover rounded-sm cursor-pointer"})}),e.jsxs("div",{className:"flex-1 space-y-4 text-sm text-gray-700",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 capitalize",children:s.product.name}),e.jsxs("div",{className:"flex gap-4 mt-1 text-xs text-gray-500",children:[e.jsxs("span",{children:["Product ID: ",e.jsx("code",{children:s.product._id})]}),e.jsxs("span",{children:["Qty: ",e.jsx("strong",{children:s.quantity})]})]})]}),e.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-4",children:[e.jsx("h5",{className:"text-sm font-bold text-gray-900",children:"🧾 Price Calculation Summary"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Step 1: Base Price"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Base Price (per unit)"}),e.jsxs("span",{children:["₹",h(d)]})]}),N>0&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex justify-between text-green-600",children:[e.jsxs("span",{children:["Offer Discount (",N,"%)"]}),e.jsxs("span",{children:["-₹",h(S)]})]}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Price After Offer"}),e.jsxs("span",{children:["₹",h(i)]})]})]})]}),(s.withFallPico||s.withTassels)&&e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Step 2: Add-ons"}),s.withFallPico&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"+ Fall Pico"}),e.jsxs("span",{children:["+₹",le]})]}),s.withTassels&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"+ Tassels"}),e.jsxs("span",{children:["+₹",oe]})]})]}),e.jsxs("div",{className:"border-t pt-2 space-y-1",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Step 3: Final Price (Per Unit)"}),e.jsxs("div",{className:"flex justify-between font-medium",children:[e.jsx("span",{children:"Per Unit Final Price"}),e.jsxs("span",{children:["₹",h(p)]})]})]}),e.jsxs("div",{className:"space-y-1 pt-2",children:[e.jsx("p",{className:"font-semibold text-gray-700",children:"Step 4: Gross Total"}),e.jsxs("div",{className:"flex justify-between font-bold text-gray-800",children:[e.jsxs("span",{children:[s.quantity," × ₹",h(p)]}),e.jsxs("span",{children:["₹",h(u)]})]})]}),g>0&&e.jsxs("div",{className:"space-y-1 pt-2 text-red-600",children:[e.jsx("p",{className:"font-semibold text-red-700",children:"Step 5: Coupon Discount"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Coupon Discount (",W,"%)"]}),e.jsxs("span",{children:["-₹",h(g)]})]})]}),e.jsxs("div",{className:"border-t pt-2 flex justify-between text-lg font-bold text-gray-900",children:[e.jsx("span",{children:" Net Payable"}),e.jsxs("span",{children:["₹",h(E)]})]})]})]})]})},t)},We=({order:s})=>{var t,h,o,y,d,j,P,m,N,g,S,i;return e.jsxs(M.div,{custom:4,initial:"hidden",animate:"visible",variants:ee,className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(Te,{size:20}),"Shipping & Delivery"]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Delivery Address"}),e.jsx("div",{className:"text-sm text-gray-800 space-y-1",children:e.jsxs("p",{className:"text-sm text-foreground leading-relaxed",children:[((t=s==null?void 0:s.shippingAddress)==null?void 0:t.street)||((h=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:h.street),e.jsx("br",{}),((o=s==null?void 0:s.shippingAddress)==null?void 0:o.city)||((y=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:y.city),","," ",((d=s==null?void 0:s.shippingAddress)==null?void 0:d.state)||((j=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:j.state),e.jsx("br",{}),((P=s==null?void 0:s.shippingAddress)==null?void 0:P.postalCode)||((m=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:m.postalCode),","," ",((N=s==null?void 0:s.shippingAddress)==null?void 0:N.country)||((g=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:g.country),e.jsx("br",{}),e.jsxs("span",{className:"font-medium",children:["Phone:"," ",((S=s==null?void 0:s.shippingAddress)==null?void 0:S.phone)||((i=s==null?void 0:s.shippingAddressSnapshot)==null?void 0:i.phone)]})]})})]}),s.deliveredAt&&e.jsxs("div",{className:"pt-4 border-t",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Delivery Completed"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(s.deliveredAt).toLocaleString("en-IN")})]})]})})]})},$e=({order:s})=>e.jsxs(M.div,{custom:5,initial:"hidden",animate:"visible",variants:ee,className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(Ce,{size:20}),"Payment Details"]}),e.jsx("div",{className:"bg-white border border-gray-200 rounded-xl p-6 shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Payment Method"}),e.jsx("p",{className:"text-sm font-medium text-gray-800 capitalize",children:s.paymentMethod})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Payment Status"}),e.jsx(ce,{status:s.paymentStatus,type:"payment"})]}),s.razorpay_order_id&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Razorpay Order ID"}),e.jsx("p",{className:"text-sm font-mono text-gray-800",children:s.razorpay_order_id})]}),s.paidAt&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Payment Date"}),e.jsx("p",{className:"text-sm font-medium text-gray-800",children:new Date(s.paidAt).toLocaleString("en-IN")})]})]})})]});function Ge(){var N,g,S,i,p,u,E,W,a;const{id:s}=ve(),[t,h]=Y.useState(null),[o,y]=Y.useState(!0);console.log("Order From ADMINORDERDE",t);const d=Y.useRef(),j={id:(t==null?void 0:t.razorpay_order_id)||"",date:(t==null?void 0:t.createdAt)||"",customerName:`${((N=t==null?void 0:t.user)==null?void 0:N.firstName)||""} ${((g=t==null?void 0:t.user)==null?void 0:g.lastName)||""}`,email:((S=t==null?void 0:t.user)==null?void 0:S.email)||"",phone:((i=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:i.phone)||"",shippingAddress:{street:((p=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:p.street)||"",city:((u=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:u.city)||"",state:((E=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:E.state)||"",country:((W=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:W.country)||"",postalCode:((a=t==null?void 0:t.shippingAddressSnapshot)==null?void 0:a.postalCode)||""},items:((t==null?void 0:t.items)||[]).map(n=>{var l,v;return{name:((l=n==null?void 0:n.product)==null?void 0:l.name)||"Product",quantity:(n==null?void 0:n.quantity)||0,price:((v=n==null?void 0:n.product)==null?void 0:v.price)||0,withFallPico:(n==null?void 0:n.withFallPico)||!1,withTassels:(n==null?void 0:n.withTassels)||!1}}),subtotal:(t==null?void 0:t.totalAmount)||0,shipping:"Free",paymentMethod:(t==null?void 0:t.paymentMethod)||"N/A"};Y.useEffect(()=>{y(!0),me.get(`/admin/orders/order/${s}`).then(n=>{h(n.data.data),y(!1)}).catch(n=>{console.error("Error fetching order:",n),h(null),y(!1)})},[s]);const P=n=>(n||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2});if(o)return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"animate-pulse space-y-8",children:[e.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),e.jsx("div",{className:"h-32 bg-gray-200 rounded"}),e.jsx("div",{className:"h-48 bg-gray-200 rounded"})]})})});if(t===null)return e.jsx(M.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.3},className:"text-center py-16",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(de,{size:48,className:"mx-auto text-gray-400 mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Order Not Found"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"The order you're looking for doesn't exist or may have been removed."}),e.jsx(M.div,{whileHover:{x:-5},transition:{duration:.2},children:e.jsxs(pe,{to:"/admin/orders",className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[e.jsx(ue,{size:16}),"Back to Orders"]})})]})});const m=()=>{const n=d.current.innerHTML,l=document.body.innerHTML;document.body.innerHTML=n,window.print(),document.body.innerHTML=l,window.location.reload()};return e.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:e.jsx("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs(M.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3},className:"space-y-8",children:[e.jsx(Ie,{order:t,onPrint:()=>m()}),e.jsx(Ue,{user:t.user}),e.jsx(ze,{order:t,formatINR:P}),e.jsxs(M.div,{custom:3,initial:"hidden",animate:"visible",variants:ee,className:"space-y-4",children:[e.jsxs("h3",{className:"flex items-center gap-2 text-xl font-semibold text-gray-800",children:[e.jsx(de,{size:20}),"Order Items (",t.items.length,")"]}),e.jsx("div",{className:"space-y-4",children:t.items.map((n,l)=>e.jsx(Me,{item:n,index:l,formatINR:P,order:t},n._id))})]}),e.jsx(We,{order:t}),e.jsx($e,{order:t}),e.jsx(Le,{receipt:j,printRef:d}),e.jsx(De,{imageUrl:t==null?void 0:t.delhiveryReceipt})]})})})}export{Ge as default};
